<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emily & Snake Game</title>
    <style>
      body {
        background: url("flower-garden-cat-cartoon.jpg") center/cover no-repeat,
          linear-gradient(135deg, #ffb6e6 0%, #ffe6fa 100%);
        min-height: 100vh;
        margin: 0;
        font-family: "Comic Sans MS", "Comic Sans", sans-serif;
        color: #d63384;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .intro {
        background: rgba(255, 255, 255, 0.7);
        border-radius: 2em;
        padding: 2em 3em;
        margin: 2em 0 1em 0;
        box-shadow: 0 8px 32px 0 rgba(255, 182, 230, 0.2);
        text-align: center;
      }
      h1 {
        color: #ff69b4;
        font-size: 3rem;
        margin-bottom: 0.5em;
        text-shadow: 2px 2px 8px #fff0f7;
      }
      .snake-container {
        background: rgba(255, 255, 255, 0.8);
        border-radius: 1em;
        padding: 1em 2em;
        margin: 2em 0;
        box-shadow: 0 4px 16px 0 rgba(255, 182, 230, 0.15);
        text-align: center;
      }
      #snake-canvas {
        background: #ffe6fa;
        border: 3px solid #ffb6e6;
        border-radius: 1em;
        display: block;
        margin: 0 auto 1em auto;
      }
      .credit {
        font-size: 0.9em;
        color: #b48bbd;
        margin-top: 1em;
      }
      /* Responsive */
      @media (max-width: 600px) {
        h1 {
          font-size: 2rem;
        }
        .intro,
        .snake-container {
          padding: 1em;
        }
        #snake-canvas {
          width: 90vw;
          height: 90vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="intro">
      <h1>Xin ch√†o! M√¨nh l√† Emily üê±</h1>
      <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi website c·ªßa m√¨nh.</p>
      <p>H√£y th·ª≠ ch∆°i tr√≤ ch∆°i r·∫Øn sƒÉn m·ªìi b√™n d∆∞·ªõi nh√©!</p>
    </div>

    <div class="snake-container">
      <h2>Tr√≤ ch∆°i R·∫Øn SƒÉn M·ªìi</h2>
      <canvas id="snake-canvas" width="320" height="320"></canvas>
      <div>
        <button onclick="startGame()">B·∫Øt ƒë·∫ßu l·∫°i</button>
        <span id="score">ƒêi·ªÉm: 0</span>
      </div>
    </div>

    <div class="credit">> ></div>

    <script>
      // Snake game
      const canvas = document.getElementById("snake-canvas");
      const ctx = canvas.getContext("2d");
      const box = 20;
      let snake, food, direction, score, game;

      function startGame() {
        snake = [{ x: 8, y: 8 }];
        direction = "RIGHT";
        food = {
          x: Math.floor(Math.random() * 13) + 1,
          y: Math.floor(Math.random() * 13) + 1,
        };
        score = 0;
        document.getElementById("score").innerText = "ƒêi·ªÉm: 0";
        if (game) clearInterval(game);
        game = setInterval(draw, 120);
      }

      document.addEventListener("keydown", function (e) {
        if (e.key === "ArrowUp" && direction !== "DOWN") direction = "UP";
        else if (e.key === "ArrowDown" && direction !== "UP")
          direction = "DOWN";
        else if (e.key === "ArrowLeft" && direction !== "RIGHT")
          direction = "LEFT";
        else if (e.key === "ArrowRight" && direction !== "LEFT")
          direction = "RIGHT";
      });

      function draw() {
        ctx.fillStyle = "#ffe6fa";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // V·∫Ω r·∫Øn
        for (let i = 0; i < snake.length; i++) {
          ctx.fillStyle = i === 0 ? "#ffb6e6" : "#ff69b4";
          ctx.fillRect(snake[i].x * box, snake[i].y * box, box, box);
          ctx.strokeStyle = "#fff";
          ctx.strokeRect(snake[i].x * box, snake[i].y * box, box, box);
        }

        // V·∫Ω th·ª©c ƒÉn
        ctx.fillStyle = "#a3e635";
        ctx.beginPath();
        ctx.arc(
          food.x * box + box / 2,
          food.y * box + box / 2,
          box / 2,
          0,
          2 * Math.PI
        );
        ctx.fill();

        // Di chuy·ªÉn r·∫Øn
        let head = { x: snake[0].x, y: snake[0].y };
        if (direction === "LEFT") head.x--;
        if (direction === "RIGHT") head.x++;
        if (direction === "UP") head.y--;
        if (direction === "DOWN") head.y++;

        // Ki·ªÉm tra va ch·∫°m
        if (
          head.x < 1 ||
          head.x >= 15 ||
          head.y < 1 ||
          head.y >= 15 ||
          collision(head, snake)
        ) {
          clearInterval(game);
          alert("Game Over! ƒêi·ªÉm c·ªßa b·∫°n: " + score);
          return;
        }

        snake.unshift(head);

        // ƒÇn th·ª©c ƒÉn
        if (head.x === food.x && head.y === food.y) {
          score++;
          document.getElementById("score").innerText = "ƒêi·ªÉm: " + score;
          food = {
            x: Math.floor(Math.random() * 13) + 1,
            y: Math.floor(Math.random() * 13) + 1,
          };
        } else {
          snake.pop();
        }
      }

      function collision(head, array) {
        for (let i = 0; i < array.length; i++) {
          if (head.x === array[i].x && head.y === array[i].y) return true;
        }
        return false;
      }

      // B·∫Øt ƒë·∫ßu game khi t·∫£i trang
      window.onload = startGame;
    </script>
  </body>
</html>
